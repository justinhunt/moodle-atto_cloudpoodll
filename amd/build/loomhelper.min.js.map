{"version":3,"file":"loomhelper.min.js","sources":["../src/loomhelper.js"],"sourcesContent":["define(['jquery', 'core/log',\r\n    'https://www.unpkg.com/@loomhq/record-sdk@2.36.18/dist/cjs/index.js',\r\n    'https://www.unpkg.com/@loomhq/record-sdk@2.36.18/dist/cjs/is-supported.js',\r\n    'https://www.unpkg.com/@loomhq/loom-embed@1.2.2/dist/cjs/index.js'],\r\n    function($, log,loomSDK, loomIsSupported, loomEmbed) {\r\n    \"use strict\"; // jshint ;_;\r\n\r\n\r\n    log.debug('Loom helper: initialising');\r\n\r\n    return {\r\n        uniqid: '',\r\n\r\n        insertEmbedPlayer: function (html) {\r\n            const target = document.getElementById(this.uniqid + \"_target\");\r\n            if (target) {\r\n                target.innerHTML = html;\r\n            }\r\n        },\r\n\r\n        init: async function(uniqid, jws) {\r\n            this.uniqid = uniqid;\r\n            const { supported, error } = await loomIsSupported.isSupported();\r\n\r\n            if (!supported) {\r\n                console.warn(`Error setting up Loom: ${error}`);\r\n                return;\r\n            }\r\n\r\n            const button = document.getElementById(uniqid + '_loom_launcher');\r\n            if (!button) {\r\n                return;\r\n            }\r\n\r\n            const { configureButton } = await loomSDK.setup({\r\n                jws: jws\r\n            });\r\n\r\n            const sdkButton = configureButton({ element: button });\r\n            sdkButton.on(\"insert-click\", async (video) => {\r\n                document.getElementById('{{videourlfield}}').value = video.sharedUrl;\r\n                const { html } = await loomEmbed.oembed(video.sharedUrl, { width: 400 });\r\n                insertEmbedPlayer(html);\r\n            });\r\n        }\r\n    }\r\n});"],"names":["define","$","log","loomSDK","loomIsSupported","loomEmbed","debug","uniqid","insertEmbedPlayer","html","target","document","getElementById","this","innerHTML","init","async","jws","supported","error","isSupported","console","warn","button","configureButton","setup","element","on","value","video","sharedUrl","oembed","width"],"mappings":"AAAAA,qCAAO,CAAC,SAAU,WACd,qEACA,4EACA,qEACA,SAASC,EAAGC,IAAIC,QAASC,gBAAiBC,kBAI1CH,IAAII,MAAM,6BAEH,CACHC,OAAQ,GAERC,kBAAmB,SAAUC,YACnBC,OAASC,SAASC,eAAeC,KAAKN,OAAS,WACjDG,SACAA,OAAOI,UAAYL,OAI3BM,KAAMC,eAAeT,OAAQU,UACpBV,OAASA,aACRW,UAAEA,UAAFC,MAAaA,aAAgBf,gBAAgBgB,kBAE9CF,sBACDG,QAAQC,sCAA+BH,cAIrCI,OAASZ,SAASC,eAAeL,OAAS,sBAC3CgB,oBAICC,gBAAEA,uBAA0BrB,QAAQsB,MAAM,CAC5CR,IAAKA,MAGSO,gBAAgB,CAAEE,QAASH,SACnCI,GAAG,gBAAgBX,MAAAA,QACzBL,SAASC,eAAe,qBAAqBgB,MAAQC,MAAMC,gBACrDrB,KAAEA,YAAeJ,UAAU0B,OAAOF,MAAMC,UAAW,CAAEE,MAAO,MAClExB,kBAAkBC"}