{"version":3,"file":"cloudpoodllloader.min.js","sources":["../src/cloudpoodllloader.js"],"sourcesContent":["define(['jquery', 'core/log',\r\n        'https://cdn.jsdelivr.net/gh/justinhunt/cloudpoodll@latest/amd/build/cloudpoodll.min.js',\r\n        'core/str'],\r\n    function($, log, CloudPoodll, str) {\r\n        return {\r\n            init: function(recorderclass, thecallback) {\r\n                CloudPoodll.autoCreateRecorders(recorderclass);\r\n                CloudPoodll.theCallback = thecallback;\r\n                CloudPoodll.initEvents();\r\n                $(\"iframe\").on(\"load\", function() {\r\n                    $(\".assignsubmission_cloudpoodll_recording_cont\").css('background-image', 'none');\r\n                });\r\n\r\n                // Load the history template for the history tab; this will call the history mustache template.\r\n                $('.atto_cloudpoodll_form li[data-content=\"history\"]')\r\n                    .on(\"click\", function() {\r\n                        if($(this).attr(\"data-loaded\")==\"true\"){return;}\r\n                        $(this).attr(\"data-loaded\",\"true\");\r\n                        var loadingStr = str.get_string('loading', 'atto_cloudpoodll');\r\n                        var loadingHtml = \"<br /><div class=\\\"d-flex justify-content-center\\\">\\n\" +\r\n                            \"  <div class=\\\"spinner-border\\\" role=\\\"status\\\">\\n\" +\r\n                            \"    <span class=\\\"sr-only\\\">\" + loadingStr + \"</span>\\n\" +\r\n                            \"  </div>\\n\" +\r\n                            \"</div><br />\";\r\n\r\n                        $('div[data-field=\"history\"]').html(loadingHtml);\r\n\r\n                        Y.namespace('M.atto_cloudpoodll').Button.prototype.loadHistory();\r\n                    });\r\n            },\r\n            fetch_guessed_extension(mediatype){\r\n                if(mediatype==='screen'){mediatype='video';}\r\n                var mimetype = CloudPoodll.guess_mimetype(mediatype,0,false);\r\n                if(mimetype){\r\n                    var bits = mimetype.split('/');\r\n                    if(bits.length===2){return bits[1];}\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n    });"],"names":["define","$","log","CloudPoodll","str","init","recorderclass","thecallback","autoCreateRecorders","theCallback","initEvents","on","css","this","attr","loadingHtml","get_string","html","Y","namespace","Button","prototype","loadHistory","fetch_guessed_extension","mediatype","mimetype","guess_mimetype","bits","split","length"],"mappings":"AAAAA,4CAAO,CAAC,SAAU,WACV,yFACA,aACJ,SAASC,EAAGC,IAAKC,YAAaC,WACnB,CACHC,KAAM,SAASC,cAAeC,aAC1BJ,YAAYK,oBAAoBF,eAChCH,YAAYM,YAAcF,YAC1BJ,YAAYO,aACZT,EAAE,UAAUU,GAAG,QAAQ,WACnBV,EAAE,gDAAgDW,IAAI,mBAAoB,WAI9EX,EAAE,qDACGU,GAAG,SAAS,cACuB,QAA7BV,EAAEY,MAAMC,KAAK,gBAChBb,EAAEY,MAAMC,KAAK,cAAc,YAEvBC,YAAc,8HADDX,IAAIY,WAAW,UAAW,oBACzB,kCAMlBf,EAAE,6BAA6BgB,KAAKF,aAEpCG,EAAEC,UAAU,sBAAsBC,OAAOC,UAAUC,mBAG/DC,iCAAwBC,WACL,WAAZA,YAAsBA,UAAU,aAC/BC,SAAWtB,YAAYuB,eAAeF,UAAU,GAAE,MACnDC,SAAS,KACJE,KAAOF,SAASG,MAAM,QACT,IAAdD,KAAKE,cAAmBF,KAAK,UAE7B"}