{"version":3,"sources":["../src/cloudpoodllloader.js"],"names":["define","$","log","CloudPoodll","str","init","recorderclass","thecallback","autoCreateRecorders","theCallback","initEvents","on","css","attr","loadingStr","get_string","html","Y","namespace","Button","prototype","loadHistory","fetch_guessed_extension","mediatype","mimetype","guess_mimetype","bits","split","length"],"mappings":"AAAAA,OAAM,sCAAC,CAAC,QAAD,CAAW,UAAX,CACC,wFADD,CAEC,UAFD,CAAD,CAGF,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAA8BC,CAA9B,CAAmC,CAC/B,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAwBC,CAAxB,CAAqC,CACvCJ,CAAW,CAACK,mBAAZ,CAAgCF,CAAhC,EACAH,CAAW,CAACM,WAAZ,CAA0BF,CAA1B,CACAJ,CAAW,CAACO,UAAZ,GACAT,CAAC,CAAC,QAAD,CAAD,CAAYU,EAAZ,CAAe,MAAf,CAAuB,UAAW,CAC9BV,CAAC,CAAC,8CAAD,CAAD,CAAkDW,GAAlD,CAAsD,kBAAtD,CAA0E,MAA1E,CACH,CAFD,EAKAX,CAAC,CAAC,qDAAD,CAAD,CACKU,EADL,CACQ,OADR,CACiB,UAAW,CACpB,GAAgC,MAA7B,EAAAV,CAAC,CAAC,IAAD,CAAD,CAAQY,IAAR,CAAa,aAAb,CAAH,CAAuC,CAAC,MAAQ,CAChDZ,CAAC,CAAC,IAAD,CAAD,CAAQY,IAAR,CAAa,aAAb,CAA2B,MAA3B,EAFoB,GAGhBC,CAAAA,CAAU,CAAGV,CAAG,CAACW,UAAJ,CAAe,SAAf,CAA0B,kBAA1B,CAHG,CAUpBd,CAAC,CAAC,6BAAD,CAAD,CAA+Be,IAA/B,CANkB,sIAEmBF,CAFnB,kCAMlB,EAEAG,CAAC,CAACC,SAAF,CAAY,oBAAZ,EAAkCC,MAAlC,CAAyCC,SAAzC,CAAmDC,WAAnD,EACH,CAdL,CAeH,CAzBE,CA0BHC,uBA1BG,kCA0BqBC,CA1BrB,CA0B+B,CAC9B,GAAIC,CAAAA,CAAQ,CAAGrB,CAAW,CAACsB,cAAZ,CAA2BF,CAA3B,CAAqC,CAArC,IAAf,CACA,GAAGC,CAAH,CAAY,CACR,GAAIE,CAAAA,CAAI,CAAGF,CAAQ,CAACG,KAAT,CAAe,GAAf,CAAX,CACA,GAAiB,CAAd,GAAAD,CAAI,CAACE,MAAR,CAAmB,CAAC,MAAOF,CAAAA,CAAI,CAAC,CAAD,CAAK,CACvC,CACD,QACH,CAjCE,CAmCV,CAvCC,CAAN","sourcesContent":["define(['jquery', 'core/log',\r\n        'https://cdn.jsdelivr.net/gh/justinhunt/cloudpoodll@latest/amd/build/cloudpoodll.min.js',\r\n        'core/str'],\r\n    function($, log, CloudPoodll, str) {\r\n        return {\r\n            init: function(recorderclass, thecallback) {\r\n                CloudPoodll.autoCreateRecorders(recorderclass);\r\n                CloudPoodll.theCallback = thecallback;\r\n                CloudPoodll.initEvents();\r\n                $(\"iframe\").on(\"load\", function() {\r\n                    $(\".assignsubmission_cloudpoodll_recording_cont\").css('background-image', 'none');\r\n                });\r\n\r\n                // Load the history template for the history tab; this will call the history mustache template.\r\n                $('.atto_cloudpoodll_form li[data-content=\"history\"]')\r\n                    .on(\"click\", function() {\r\n                        if($(this).attr(\"data-loaded\")==\"true\"){return;}\r\n                        $(this).attr(\"data-loaded\",\"true\");\r\n                        var loadingStr = str.get_string('loading', 'atto_cloudpoodll');\r\n                        var loadingHtml = \"<br /><div class=\\\"d-flex justify-content-center\\\">\\n\" +\r\n                            \"  <div class=\\\"spinner-border\\\" role=\\\"status\\\">\\n\" +\r\n                            \"    <span class=\\\"sr-only\\\">\" + loadingStr + \"</span>\\n\" +\r\n                            \"  </div>\\n\" +\r\n                            \"</div><br />\";\r\n\r\n                        $('div[data-field=\"history\"]').html(loadingHtml);\r\n\r\n                        Y.namespace('M.atto_cloudpoodll').Button.prototype.loadHistory();\r\n                    });\r\n            },\r\n            fetch_guessed_extension(mediatype){\r\n                var mimetype = CloudPoodll.guess_mimetype(mediatype,0,false);\r\n                if(mimetype){\r\n                    var bits = mimetype.split('/');\r\n                    if(bits.length===2){return bits[1];}\r\n                }\r\n                return false;\r\n            }\r\n        };\r\n    });"],"file":"cloudpoodllloader.min.js"}