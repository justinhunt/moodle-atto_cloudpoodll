(function(a,b){if("function"==typeof define&&define.amd){define ("atto_cloudpoodll/cloudpoodll",[],function(){return b(a)})}else{a.CloudPoodll=b(a)}})(this,function(a){return{version:"1.2.8",baseURL:"https://cloud.poodll.com/local/cpapi/fastpoodllloader.php",params:["parent","appid","timelimit","type","media","updatecontrol","width","height","id","iframeclass","transcode","transcoder","transcribe","subtitle","language","transcribevocab","expiredays","owner","region","token","localloader","localloading","notificationurl","sourcemimetype","speechevents","hints","alreadyparsed","fallback"],fetchContainers:function fetchContainers(a){var b=document.getElementsByClassName(a);return b},autoCreateRecorders:function autoCreateRecorders(a){if(!a){a="cloudpoodll"}for(var b=this.fetchContainers(a),c=0;c<b.length;c++){this.insertRecorder(b[c])}},createRecorder:function createRecorder(a){var b=document.getElementById(a);this.insertRecorder(b)},insertRecorder:function insertRecorder(a,b){if(b==void 0){b=this.parseAttributes(a)}var c=this.createIframe(b);if(c){a.appendChild(c);a.setAttribute("data-alreadyparsed","true")}},parseAttributes:function parseAttributes(a){for(var b={},c=0,d;c<this.params.length;c++){d=a.getAttribute("data-"+this.params[c]);if(null!==d){b[this.params[c]]=d}}return b},createIframe:function createIframe(a){if(a.hasOwnProperty("alreadyparsed")){if("true"==a.alreadyparsed){return!1}}if(!a.hasOwnProperty("parent")){a.parent=window.location.protocol+"//"+window.location.hostname}if(!a.hasOwnProperty("media")){a.media="audio"}a.sourcemimetype=this.guess_mimetype(a.media,a.transcribe,a.hints);var b=document.createElement("iframe");if(!a.hasOwnProperty("localloader")){var c="never"}else{var c=a.hasOwnProperty("localloading")?a.localloading:"auto"}switch(c){case"always":var d=a.parent+a.localloader+"?";break;case"never":var d=this.baseURL+"?";break;case"auto":default:var e=this.is_ios()||this.is_safari();if(e){var d=a.parent+a.localloader+"?"}else{var d=this.baseURL+"?"}break;}for(var f in a){d=d+f+"="+a[f]+"&"}b.setAttribute("src",d);if(a.hasOwnProperty("iframeclass")){b.setAttribute("class",a.iframeclass)}else{if(!a.hasOwnProperty("width")){a.width=350}b.setAttribute("width",a.width);if(!a.hasOwnProperty("height")){if("audio"==a.media){a.height=250}else{a.height=550}}b.setAttribute("height",a.height)}b.setAttribute("frameBorder",0);b.setAttribute("allow","camera,microphone");return b},theCallback:function theCallback(a){switch(a.type){case"filesubmitted":var b=a.updatecontrol,c=document.getElementById(b),d=a.mediaurl;if(c){c.value=d}break;case"error":alert("ERROR:".data.message);}},initEvents:function initEvents(){var a=this;window.addEventListener("message",function(b){var c=b.data;if(c&&c.hasOwnProperty("id")&&c.hasOwnProperty("type")){a.theCallback(c)}})},sendMessage:function sendMessage(a,b){if(!b.hasOwnProperty("type")){return}var c=document.getElementById(a).getElementsByTagName("iframe")[0];c.contentWindow.postMessage(b)},fetchroot:function fetchroot(){return a},is_safari:function is_safari(){return /^((?!chrome|android).)*safari/i.test(navigator.userAgent)},is_ios:function is_ios(){return /iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},guess_mimetype:function guess_mimetype(a,b,c){if(2==b){return"audio/wav"}if(c&&c.includes("stereoaudio")){return"audio/wav"}var d=navigator.appVersion,e=navigator.userAgent,f=navigator.appName,g=""+parseFloat(navigator.appVersion),h,i;if(null!==e.match("(?:Edge|EdgA|EdgiOS)")){f="Edge"}else if(-1!=(i=e.indexOf("Opera"))){f="Opera"}else if(-1!=(i=e.indexOf("MSIE"))){f="IE"}else if(-1!=(i=e.indexOf("Chrome"))){f="Chrome"}else if(-1!=(i=e.indexOf("Safari"))){f="Safari"}else if(-1!=(i=e.indexOf("Firefox"))){f="Firefox"}else if((h=e.lastIndexOf(" ")+1)<(i=e.lastIndexOf("/"))){f=e.substring(h,i);if(f.toLowerCase()==f.toUpperCase()){f=navigator.appName}}var j="Unknown OS";if(-1!=navigator.userAgent.indexOf("Win")){j="Windows"}if(-1!=navigator.userAgent.indexOf("Mac")){j="Macintosh"}if(-1!=navigator.userAgent.indexOf("Linux")){j="Linux"}if(-1!=navigator.userAgent.indexOf("Android")){j="Android"}if(-1!=navigator.userAgent.indexOf("like Mac")){j="iOS"}var k={name:f,version:g,OS:j},l="unsupported/unsupported";if("video"==a){switch(k.name){case"Edge":case"MSIE":l="video/webm";break;case"Safari":l="video/quicktime";break;case"Firefox":case"Chrome":case"Opera":default:l="video/webm";}}else{switch(k.name){case"MSIE":l="audio/wav";break;case"Edge":case"Safari":l="audio/wav";break;case"Firefox":l="audio/ogg";break;case"Chrome":case"Opera":default:l="audio/webm";}}return l}}});
//# sourceMappingURL=cloudpoodll.min.js.map
