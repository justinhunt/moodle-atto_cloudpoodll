!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b(a)}):a.CloudPoodll=b(a)}(this,function(a){return{version:"1.2.8",baseURL:"https://cloud.poodll.com/local/cpapi/fastpoodllloader.php",params:["parent","appid","timelimit","type","media","updatecontrol","width","height","id","iframeclass","transcode","transcoder","transcribe","subtitle","language","transcribevocab","expiredays","owner","region","token","localloader","localloading","notificationurl","sourcemimetype","speechevents","hints","alreadyparsed","fallback"],fetchContainers:function(a){var b=document.getElementsByClassName(a);return b},autoCreateRecorders:function(a){a||(a="cloudpoodll");for(var b=this.fetchContainers(a),c=0;c<b.length;c++)this.insertRecorder(b[c])},createRecorder:function(a){var b=document.getElementById(a);this.insertRecorder(b)},insertRecorder:function(a,b){void 0==b&&(b=this.parseAttributes(a));var c=this.createIframe(b);c&&(a.appendChild(c),a.setAttribute("data-alreadyparsed","true"))},parseAttributes:function(a){for(var b={},c=0;c<this.params.length;c++){var d=a.getAttribute("data-"+this.params[c]);null!==d&&(b[this.params[c]]=d)}return b},createIframe:function(a){if(a.hasOwnProperty("alreadyparsed")&&"true"==a.alreadyparsed)return!1;a.hasOwnProperty("parent")||(a.parent=window.location.protocol+"//"+window.location.hostname),a.hasOwnProperty("media")||(a.media="audio"),a.sourcemimetype=this.guess_mimetype(a.media,a.transcribe,a.hints);var b=document.createElement("iframe");if(a.hasOwnProperty("localloader"))var c=a.hasOwnProperty("localloading")?a.localloading:"auto";else var c="never";switch(c){case"always":var d=a.parent+a.localloader+"?";break;case"never":var d=this.baseURL+"?";break;case"auto":default:var e=this.is_ios()||this.is_safari();if(e)var d=a.parent+a.localloader+"?";else var d=this.baseURL+"?"}for(var f in a)d=d+f+"="+a[f]+"&";return b.setAttribute("src",d),a.hasOwnProperty("iframeclass")?b.setAttribute("class",a.iframeclass):(a.hasOwnProperty("width")||(a.width=350),b.setAttribute("width",a.width),a.hasOwnProperty("height")||("audio"==a.media?a.height=250:a.height=550),b.setAttribute("height",a.height)),b.setAttribute("frameBorder",0),b.setAttribute("allow","camera,microphone"),b},theCallback:function(a){switch(a.type){case"filesubmitted":var b=a.updatecontrol,c=document.getElementById(b),d=a.mediaurl;c&&(c.value=d);break;case"error":alert("ERROR:".data.message)}},initEvents:function(){var a=this;window.addEventListener("message",function(b){var c=b.data;c&&c.hasOwnProperty("id")&&c.hasOwnProperty("type")&&a.theCallback(c)})},sendMessage:function(a,b){if(b.hasOwnProperty("type")){var c=document.getElementById(a).getElementsByTagName("iframe")[0];c.contentWindow.postMessage(b)}},fetchroot:function(){return a},is_safari:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},is_ios:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},guess_mimetype:function(a,b,c){if(2==b)return"audio/wav";if(c&&c.includes("stereoaudio"))return"audio/wav";var d,e,f=(navigator.appVersion,navigator.userAgent),g=navigator.appName,h=""+parseFloat(navigator.appVersion);null!==f.match("(?:Edge|EdgA|EdgiOS)")?g="Edge":(e=f.indexOf("Opera"))!=-1?g="Opera":(e=f.indexOf("MSIE"))!=-1?g="IE":(e=f.indexOf("Chrome"))!=-1?g="Chrome":(e=f.indexOf("Safari"))!=-1?g="Safari":(e=f.indexOf("Firefox"))!=-1?g="Firefox":(d=f.lastIndexOf(" ")+1)<(e=f.lastIndexOf("/"))&&(g=f.substring(d,e),g.toLowerCase()==g.toUpperCase()&&(g=navigator.appName));var i="Unknown OS";navigator.userAgent.indexOf("Win")!=-1&&(i="Windows"),navigator.userAgent.indexOf("Mac")!=-1&&(i="Macintosh"),navigator.userAgent.indexOf("Linux")!=-1&&(i="Linux"),navigator.userAgent.indexOf("Android")!=-1&&(i="Android"),navigator.userAgent.indexOf("like Mac")!=-1&&(i="iOS");var j={};j.name=g,j.version=h,j.OS=i;var k="unsupported/unsupported";if("video"==a)switch(j.name){case"Edge":case"MSIE":k="video/webm";break;case"Safari":k="video/quicktime";break;case"Firefox":case"Chrome":case"Opera":default:k="video/webm"}else switch(j.name){case"MSIE":k="audio/wav";break;case"Edge":case"Safari":k="audio/wav";break;case"Firefox":k="audio/ogg";break;case"Chrome":case"Opera":default:k="audio/webm"}return k}}});